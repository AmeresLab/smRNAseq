process {
    executor = "slurm"
    mainQ = 'work'

    $extractHairpins {
        queue = mainQ
        time = '10s'
        memory = '50 MB'
        module = "BEDTools/2.25.0-foss-2017a:SAMtools/1.4-foss-2017a"
    }

    $makeIndex {
        queue = mainQ
        time = '2s'
        memory = '100 MB'
        module = "Bowtie/1.1.2-foss-2017a:SAMtools/1.4-foss-2017a"
    }

    $trim_adapter {
        queue = mainQ
        time = '20m'
        memory = '120 MB'
        module = "cutadapt/1.9.1-foss-2017a-Python-2.7.13"
    }

    $trim_4N {
        process.container = "dukegcb/seqtk:latest"
        queue = mainQ
        time = '4m'
        memory = '50 MB'
        docker.enabled = true
    }

    $bowtie_hairpins {
        module = "Bowtie/1.1.2-foss-2017a:Mawk/1.3.4-20150503:SAMtools/1.4-foss-2017a"
        cpus = 4
        queue = mainQ
        time = '50m'
        memory = '1 GB'
        penv = "smp"
    }

    $post_alignment {
        queue = mainQ
        time = '4m'
        memory = '1.5 GB'
        module = "SAMtools/1.4-foss-2017a"
    }

    $writeJson {
        queue = mainQ
        time = '0.5s'
        memory = '50 MB'
        module = "Python/2.7.13-foss-2017a"
    }
}
